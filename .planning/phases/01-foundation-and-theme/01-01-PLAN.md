---
phase: 01-foundation-and-theme
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - tsconfig.json
  - .npmrc
  - app.json
  - .env
  - .env.example
  - .gitignore
  - sql/current_schema.sql
  - sql/migration_cascade_delete.sql
  - sql/migration_per_set_tracking.sql
  - sql/migration_schema_cleanup.sql
  - sql/migration_system_exercises.sql
  - sql/migration_template_sets.sql
  - src/types/database.ts
  - src/types/services.ts
autonomous: true

must_haves:
  truths:
    - "Expo project exists and can be started with npx expo start"
    - "TypeScript compiles with strict mode and @/* path alias resolves to src/*"
    - "@supabase/supabase-js and expo-sqlite are installed"
    - "SQL schema files and TypeScript types from web app are present in project"
    - ".env.example documents required Supabase env vars"
  artifacts:
    - path: "package.json"
      provides: "Expo project with dependencies"
      contains: "@supabase/supabase-js"
    - path: "tsconfig.json"
      provides: "TypeScript config with path aliases"
      contains: "@/*"
    - path: "src/types/database.ts"
      provides: "Database row/insert/update types"
      contains: "Exercise"
    - path: "src/types/services.ts"
      provides: "Service interface types"
      contains: "AuthService"
    - path: "sql/current_schema.sql"
      provides: "Database schema reference"
    - path: ".env.example"
      provides: "Env var template"
      contains: "EXPO_PUBLIC_SUPABASE_URL"
  key_links:
    - from: "tsconfig.json"
      to: "src/*"
      via: "paths alias @/*"
      pattern: '"@/\\*".*"src/\\*"'
    - from: "src/types/services.ts"
      to: "@supabase/supabase-js"
      via: "import types"
      pattern: "from '@supabase/supabase-js'"
---

<objective>
Scaffold the Expo project, install dependencies, configure TypeScript, and port reference files from the web app.

Purpose: Create the project substrate that all subsequent plans build on -- a working Expo project with correct tooling configuration and the web app's types and SQL schema copied in for reference.

Output: A runnable (but empty) Expo project with @supabase/supabase-js, expo-sqlite, TypeScript path aliases, SQL schema files, database/service types, and env var template.
</objective>

<execution_context>
@C:\Users\MarioPC\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\MarioPC\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation-and-theme/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Scaffold Expo project and install dependencies</name>
  <files>package.json, tsconfig.json, .npmrc, app.json</files>
  <action>
1. The project directory already has `docs/` and `README.md`. The Expo scaffolding must happen INSIDE the existing `C:\Users\MarioPC\Apps\ironlift\` directory. Since `pnpm create expo-app` creates a new directory, scaffold into a temp name and move contents:
   - Run `cd C:\Users\MarioPC\Apps && pnpm create expo-app@latest ironlift-temp` (accept defaults -- SDK 54 template with Expo Router + TypeScript)
   - Move all files from `ironlift-temp/` into `ironlift/` (overwrite nothing in `docs/`, preserve existing `README.md` by keeping the Expo-generated one and moving docs content if needed, or just keep the existing README)
   - Delete `ironlift-temp/`
   - IMPORTANT: Preserve the existing `docs/` directory and `.planning/` directory and `README.md`

2. Install additional dependencies:
   ```bash
   cd C:\Users\MarioPC\Apps\ironlift
   pnpm add @supabase/supabase-js expo-sqlite
   ```

3. Update `tsconfig.json` to add strict mode and path aliases:
   ```json
   {
     "extends": "expo/tsconfig.base",
     "compilerOptions": {
       "strict": true,
       "baseUrl": ".",
       "paths": {
         "@/*": ["src/*"]
       }
     },
     "include": ["**/*.ts", "**/*.tsx", ".expo/types/**/*.ts", "expo-env.d.ts"]
   }
   ```

4. Verify `.npmrc` exists with `node-linker=hoisted` (the default Expo template should create this). If it does not exist, create it with that content.

5. Create empty directory stubs that will be populated in later plans:
   - `src/hooks/` (add a `.gitkeep` file)
   - `src/services/` (add a `.gitkeep` file)
   - `src/components/` (add a `.gitkeep` file)
   - `src/lib/` (directory only, will hold supabase.ts in Plan 02)
   - `src/theme/` (directory only, will hold theme files in Plan 02)
   - `src/types/` (directory only, will hold types in Task 2)

IMPORTANT: After scaffolding, restart awareness -- the default Expo template creates files in `app/` (like `app/index.tsx`, `app/_layout.tsx`, etc.). These template files will be OVERWRITTEN in Plan 03 with the actual navigation skeleton. Leave them as-is for now so the project can run.
  </action>
  <verify>
Run from project root:
- `pnpm list @supabase/supabase-js expo-sqlite` confirms both packages are installed
- `npx tsc --noEmit` completes without errors (or only errors from template files that will be replaced)
- `cat tsconfig.json` shows `"@/*": ["src/*"]` in paths
  </verify>
  <done>Expo project scaffolded with SDK 54, @supabase/supabase-js and expo-sqlite installed, TypeScript strict mode enabled, @/* path alias configured, directory structure in place.</done>
</task>

<task type="auto">
  <name>Task 2: Copy web app reference files and create env template</name>
  <files>sql/current_schema.sql, sql/migration_cascade_delete.sql, sql/migration_per_set_tracking.sql, sql/migration_schema_cleanup.sql, sql/migration_system_exercises.sql, sql/migration_template_sets.sql, src/types/database.ts, src/types/services.ts, .env, .env.example, .gitignore</files>
  <action>
1. Copy all SQL schema files from the web app as-is (no modifications):
   - Source: `C:\Users\MarioPC\Apps\exercise_tracker_app\sql\*`
   - Destination: `C:\Users\MarioPC\Apps\ironlift\sql\`
   - Files: current_schema.sql, migration_cascade_delete.sql, migration_per_set_tracking.sql, migration_schema_cleanup.sql, migration_system_exercises.sql, migration_template_sets.sql

2. Copy TypeScript type files from the web app as-is (no modifications):
   - Source: `C:\Users\MarioPC\Apps\exercise_tracker_app\packages\shared\src\types\database.ts`
   - Destination: `C:\Users\MarioPC\Apps\ironlift\src\types\database.ts`
   - Source: `C:\Users\MarioPC\Apps\exercise_tracker_app\packages\shared\src\types\services.ts`
   - Destination: `C:\Users\MarioPC\Apps\ironlift\src\types\services.ts`
   - These files import from `@supabase/supabase-js` (services.ts line 8) which is why that package was installed in Task 1.

3. Create `.env.example` (committed to git):
   ```
   # Supabase connection (get from Supabase Dashboard -> Settings -> API)
   EXPO_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
   EXPO_PUBLIC_SUPABASE_ANON_KEY=your-anon-key-here
   ```

4. Create `.env` (gitignored) with the same structure but placeholder values:
   ```
   EXPO_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
   EXPO_PUBLIC_SUPABASE_ANON_KEY=your-anon-key-here
   ```

5. Ensure `.gitignore` includes `.env` (but NOT `.env.example`). The Expo template's .gitignore should already handle this, but verify. If not present, add:
   ```
   .env
   .env.local
   ```
  </action>
  <verify>
- `ls sql/` shows all 6 SQL files
- `ls src/types/` shows database.ts and services.ts
- `npx tsc --noEmit` on src/types/services.ts resolves the @supabase/supabase-js import (may have other template errors, that is OK)
- `.env.example` exists and contains EXPO_PUBLIC_SUPABASE_URL
- `.env` exists and is gitignored (verify with `git check-ignore .env`)
  </verify>
  <done>All 6 SQL schema files copied, database.ts and services.ts types copied with working @supabase/supabase-js import, .env.example committed as template, .env gitignored.</done>
</task>

</tasks>

<verification>
- Project runs: `npx expo start` launches without crash (may show default template screen)
- Dependencies present: `pnpm list @supabase/supabase-js expo-sqlite` shows both
- Path alias: tsconfig.json contains `"@/*": ["src/*"]`
- Types compile: `npx tsc --noEmit` has no errors from src/types/ files
- SQL files: 6 files in sql/ directory
- Env template: .env.example exists, .env is gitignored
</verification>

<success_criteria>
- Expo SDK 54 project scaffolded and runnable
- @supabase/supabase-js and expo-sqlite installed
- TypeScript strict mode with @/* -> src/* path alias
- 6 SQL schema files copied from web app
- database.ts and services.ts types copied from web app
- .env.example with EXPO_PUBLIC_SUPABASE_URL and EXPO_PUBLIC_SUPABASE_ANON_KEY
- .env gitignored
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-and-theme/01-01-SUMMARY.md`
</output>
